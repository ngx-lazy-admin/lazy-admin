"use strict";(self.webpackChunkgo_admin_ng=self.webpackChunkgo_admin_ng||[]).push([[981],{9731:(Te,ee,g)=>{g.d(ee,{kx:()=>me});var V=g(9808),s=g(3075),k=g(8776),S=g(4546),L=g(404),D=g(3762),H=g(9860),l=g(5e3),W=g(1894);function he(f,v){if(1&f&&(l.TgZ(0,"span",4),l._uU(1),l.qZA()),2&f){const u=l.oxw();l.xp6(1),l.Oqu(u.errorMessage)}}let te=(()=>{class f extends k.n2{constructor(u){super(),this.config=u}get nzLayout(){return this.to.nzLayout?this.to.nzLayout:"horizontal"}get errorState(){return this.showError?"error":""}get nzNoColon(){return this.to.nzNoColon||!1}get nzRequired(){return(this.to.nzRequired||this.to.required)&&!0!==this.to.hideRequiredMarker||!1}get nzTooltipTitle(){return this.to.nzTooltipTitle}get nzTooltipIcon(){return this.to.NzFormTooltipIcon||null}get nzValidateStatus(){return this.to.nzValidateStatus||null}get nzTooltipStatus(){return!1}get nzHasFeedback(){return this.to.nzHasFeedback()||!1}get nzExtra(){return this.to.nzExtra}get nzSuccessTip(){return this.to.nzSuccessTip}get nzWarningTip(){return this.to.nzWarningTip}get nzErrorTip(){return this.to.nzErrorTip}get nzValidatingTip(){return this.to.nzValidatingTip}get nzAutoTips(){return this.to.nzAutoTips}get nzDisableAutoTips(){return this.to.nzDisableAutoTips}get errorMessage(){var u,m,_,b,E,A;const c=this.field.formControl;if(c)for(const d in c.errors)if(c.errors.hasOwnProperty(d)){let h=this.config.getValidatorMessage(d);if((0,H.Kn)(c.errors[d])){if(c.errors[d].errorPath)return;c.errors[d].message&&(h=c.errors[d].message)}return(null===(m=null===(u=this.field.validation)||void 0===u?void 0:u.messages)||void 0===m?void 0:m[d])&&(h=this.field.validation.messages[d]),(null===(b=null===(_=this.field.validators)||void 0===_?void 0:_[d])||void 0===b?void 0:b.message)&&(h=this.field.validators[d].message),(null===(A=null===(E=this.field.asyncValidators)||void 0===E?void 0:E[d])||void 0===A?void 0:A.message)&&(h=this.field.asyncValidators[d].message),"function"==typeof h?h(c.errors[d],this.field):h}}ngOnChanges(){}ngAfterViewInit(){}onBtnClick(){this.to.buttonClick&&this.to.buttonClick(this.model,this.options)}}return f.\u0275fac=function(u){return new(u||f)(l.Y36(k.o))},f.\u0275cmp=l.Xpm({type:f,selectors:[["app-table-wrapper"]],features:[l.qOj,l.TTD],decls:6,vars:4,consts:[[1,"mb-2"],["nz-tooltip","","nzTooltipColor","#fff","nzTooltipPlacement","topRight",3,"nzTooltipVisible","nzTooltipTrigger","nzValidateStatus","nzTooltipTitle"],["fieldComponent",""],["titleTemplate",""],[1,"ant-form-item-explain","ant-form-item-explain-error"]],template:function(u,m){if(1&u&&(l.TgZ(0,"nz-form-item",0),l.TgZ(1,"nz-form-control",1),l.GkF(2,null,2),l.YNc(4,he,2,1,"ng-template",null,3,l.W1O),l.qZA(),l.qZA()),2&u){const _=l.MAs(5);l.xp6(1),l.Q6J("nzTooltipVisible",m.showError)("nzTooltipTrigger","focus")("nzValidateStatus",m.errorState)("nzTooltipTitle",m.showError?_:null)}},directives:[W.SK,S.Nx,W.t3,S.Fd,L.SY],encapsulation:2,changeDetection:0}),f})(),N=(()=>{class f{transform(u){return u?{control:{maxWidth:`calc(100% - ${u})`},label:{width:"120px",flex:"0 0 120px"}}:null}}return f.\u0275fac=function(u){return new(u||f)},f.\u0275pipe=l.Yjl({name:"fixedWidth",type:f,pure:!0}),f})();function oe(f,v){if(1&f&&(l.TgZ(0,"nz-form-label",4),l.ALo(1,"fixedWidth"),l._UZ(2,"span",5),l.qZA()),2&f){const u=l.oxw();let m;l.Q6J("nzSpan","horizontal"!=u.nzLayout||u.fixedWidth?null:8)("nzNoColon",u.nzNoColon)("nzRequired",u.nzNoColon&&u.nzRequired)("ngStyle",null==(m=l.lcZ(1,8,u.fixedWidth))?null:m.label)("nzFor",u.id)("nzTooltipTitle",u.nzTooltipTitle)("nzTooltipIcon",u.nzTooltipIcon),l.xp6(2),l.Q6J("innerHTML",u.to.label,l.oJD)}}function Y(f,v){if(1&f&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&f){const u=l.oxw();l.xp6(1),l.Oqu(u.errorMessage)}}let ne=(()=>{class f extends k.n2{constructor(u){super(),this.config=u,this.labelStyle=null,this.controlStyle=null}get nzLayout(){return this.to.layout||this.to.layout||"horizontal"}get errorState(){var u,m,_,b,E;return!(!(null===(u=this.field.formControl)||void 0===u?void 0:u.invalid)||!((null===(m=this.field.formControl)||void 0===m?void 0:m.touched)||(null===(b=null===(_=this.options)||void 0===_?void 0:_.parentForm)||void 0===b?void 0:b.submitted)||(null===(E=this.field.validation)||void 0===E?void 0:E.show)))}get fixedWidth(){return this.to.fixedWidth||""}get nzNoColon(){return this.to.nzNoColon||this.to.noColon||!1}get nzRequired(){return(this.to.nzRequired||this.to.required)&&!0!==this.to.hideRequiredMarker||!1}get nzTooltipTitle(){return this.to.nzTooltipTitle||this.to.tooltipTitle||""}get nzTooltipIcon(){return this.to.NzFormTooltipIcon||{type:"question-circle",theme:"outline"}}get nzValidateStatus(){return this.to.nzValidateStatus||null}get nzHasFeedback(){return this.to.nzHasFeedback||!1}get nzExtra(){return this.to.nzExtra}get nzSuccessTip(){return this.to.nzSuccessTip}get nzWarningTip(){return this.to.nzWarningTip}get nzErrorTip(){return this.to.nzErrorTip}get nzValidatingTip(){return this.to.nzValidatingTip}get nzAutoTips(){return this.to.nzAutoTips}get nzDisableAutoTips(){return this.to.nzDisableAutoTips}get errorMessage(){var u,m,_,b,E,A;const c=this.field.formControl;if(c)for(const d in c.errors)if(c.errors.hasOwnProperty(d)){let h=this.config.getValidatorMessage(d);if(console.log("getValidatorMessage:"+h),(0,H.Kn)(c.errors[d])){if(c.errors[d].errorPath)return;c.errors[d].message&&(h=c.errors[d].message,console.log("fieldForm.errors[error].message:"+h))}return(null===(m=null===(u=this.field.validation)||void 0===u?void 0:u.messages)||void 0===m?void 0:m[d])&&(h=this.field.validation.messages[d],console.log("this.field.validation.messages[error]:"+h)),(null===(b=null===(_=this.field.validators)||void 0===_?void 0:_[d])||void 0===b?void 0:b.message)&&(h=this.field.validators[d].message,console.log("this.field.validators[error].message:"+h)),(null===(A=null===(E=this.field.asyncValidators)||void 0===E?void 0:E[d])||void 0===A?void 0:A.message)&&(h=this.field.asyncValidators[d].message,console.log("this.field.asyncValidators[error].message;:"+h)),"function"==typeof h?h(c.errors[d],this.field):h}}ngOnInit(){}ngOnChanges(){}}return f.\u0275fac=function(u){return new(u||f)(l.Y36(k.o))},f.\u0275cmp=l.Xpm({type:f,selectors:[["app-form-field-wrapper"]],hostVars:6,hostBindings:function(u,m){2&u&&l.ekj("ant-form-horizontal","horizontal"===m.nzLayout)("ant-form-vertical","vertical"===m.nzLayout)("ant-form-inline","inline"===m.nzLayout)},features:[l.qOj,l.TTD],decls:8,vars:9,consts:[[3,"nzSpan","nzNoColon","nzRequired","ngStyle","nzFor","nzTooltipTitle","nzTooltipIcon",4,"ngIf"],[3,"nzValidateStatus","nzErrorTip","nzSpan","ngStyle","nzExtra","nzHasFeedback"],["fieldComponent",""],["errorTpl",""],[3,"nzSpan","nzNoColon","nzRequired","ngStyle","nzFor","nzTooltipTitle","nzTooltipIcon"],[3,"innerHTML"]],template:function(u,m){if(1&u&&(l.TgZ(0,"nz-form-item"),l.YNc(1,oe,3,10,"nz-form-label",0),l.TgZ(2,"nz-form-control",1),l.ALo(3,"fixedWidth"),l.GkF(4,null,2),l.YNc(6,Y,2,1,"ng-template",null,3,l.W1O),l.qZA(),l.qZA()),2&u){const _=l.MAs(7);let b;l.xp6(1),l.Q6J("ngIf",!0!==m.to.hideLabel),l.xp6(1),l.Q6J("nzValidateStatus",m.formControl)("nzErrorTip",_)("nzSpan","horizontal"!=m.nzLayout||m.fixedWidth?null:16)("ngStyle",null==(b=l.lcZ(3,7,m.fixedWidth))?null:b.control)("nzExtra",m.nzExtra)("nzHasFeedback",m.nzHasFeedback)}},directives:[W.SK,S.Nx,V.O5,W.t3,S.iK,V.PC,S.Fd],pipes:[N],encapsulation:2,changeDetection:0}),f})();function K(f,v){if(1&f&&(l.TgZ(0,"span",4),l._uU(1),l.qZA()),2&f){const u=l.oxw();l.xp6(1),l.Oqu(u.errorMessage)}}let q=(()=>{class f extends k.n2{constructor(u){super(),this.config=u}get nzLayout(){return this.to.nzLayout?this.to.nzLayout:"horizontal"}get errorState(){return this.showError?"error":""}get nzNoColon(){return this.to.nzNoColon||!1}get nzRequired(){return(this.to.nzRequired||this.to.required)&&!0!==this.to.hideRequiredMarker||!1}get nzTooltipTitle(){return this.to.nzTooltipTitle}get nzTooltipIcon(){return this.to.NzFormTooltipIcon||null}get nzValidateStatus(){return this.to.nzValidateStatus||null}get nzTooltipStatus(){return!1}get nzHasFeedback(){return this.to.nzHasFeedback()||!1}get nzExtra(){return this.to.nzExtra}get nzSuccessTip(){return this.to.nzSuccessTip}get nzWarningTip(){return this.to.nzWarningTip}get nzErrorTip(){return this.to.nzErrorTip}get nzValidatingTip(){return this.to.nzValidatingTip}get nzAutoTips(){return this.to.nzAutoTips}get nzDisableAutoTips(){return this.to.nzDisableAutoTips}get errorMessage(){var u,m,_,b,E,A;const c=this.field.formControl;if(c)for(const d in c.errors)if(c.errors.hasOwnProperty(d)){let h=this.config.getValidatorMessage(d);if((0,H.Kn)(c.errors[d])){if(c.errors[d].errorPath)return;c.errors[d].message&&(h=c.errors[d].message)}return(null===(m=null===(u=this.field.validation)||void 0===u?void 0:u.messages)||void 0===m?void 0:m[d])&&(h=this.field.validation.messages[d]),(null===(b=null===(_=this.field.validators)||void 0===_?void 0:_[d])||void 0===b?void 0:b.message)&&(h=this.field.validators[d].message),(null===(A=null===(E=this.field.asyncValidators)||void 0===E?void 0:E[d])||void 0===A?void 0:A.message)&&(h=this.field.asyncValidators[d].message),"function"==typeof h?h(c.errors[d],this.field):h}}ngOnChanges(){}ngAfterViewInit(){}onBtnClick(){this.to.buttonClick&&this.to.buttonClick(this.model,this.options)}}return f.\u0275fac=function(u){return new(u||f)(l.Y36(k.o))},f.\u0275cmp=l.Xpm({type:f,selectors:[["app-form-field-wrapper"]],features:[l.qOj,l.TTD],decls:6,vars:4,consts:[[1,"mb-2"],["nz-tooltip","","nzTooltipColor","#fff","nzTooltipPlacement","topRight",3,"nzTooltipVisible","nzTooltipTrigger","nzValidateStatus","nzTooltipTitle"],["fieldComponent",""],["titleTemplate",""],[1,"ant-form-item-explain","ant-form-item-explain-error"]],template:function(u,m){if(1&u&&(l.TgZ(0,"nz-form-item",0),l.TgZ(1,"nz-form-control",1),l.GkF(2,null,2),l.YNc(4,K,2,1,"ng-template",null,3,l.W1O),l.qZA(),l.qZA()),2&u){const _=l.MAs(5);l.xp6(1),l.Q6J("nzTooltipVisible",m.showError)("nzTooltipTrigger","focus")("nzValidateStatus",m.errorState)("nzTooltipTitle",m.showError?_:null)}},directives:[W.SK,S.Nx,W.t3,S.Fd,L.SY],encapsulation:2,changeDetection:0}),f})(),R=(()=>{class f extends k.n2{constructor(u){super(),this.config=u,this.labelStyle=null,this.controlStyle=null}get nzLayout(){return this.to.layout||this.to.layout||"horizontal"}get errorState(){var u,m,_,b,E;return!(!(null===(u=this.field.formControl)||void 0===u?void 0:u.invalid)||!((null===(m=this.field.formControl)||void 0===m?void 0:m.touched)||(null===(b=null===(_=this.options)||void 0===_?void 0:_.parentForm)||void 0===b?void 0:b.submitted)||(null===(E=this.field.validation)||void 0===E?void 0:E.show)))}get fixedWidth(){return this.to.fixedWidth||""}get nzNoColon(){return this.to.nzNoColon||this.to.noColon||!1}get nzRequired(){return(this.to.nzRequired||this.to.required)&&!0!==this.to.hideRequiredMarker||!1}get nzTooltipTitle(){return this.to.nzTooltipTitle||this.to.tooltipTitle||""}get nzTooltipIcon(){return this.to.NzFormTooltipIcon||{type:"question-circle",theme:"outline"}}get nzValidateStatus(){return this.to.nzValidateStatus||null}get nzHasFeedback(){return this.to.nzHasFeedback||!1}get nzExtra(){return this.to.nzExtra}get nzSuccessTip(){return this.to.nzSuccessTip}get nzWarningTip(){return this.to.nzWarningTip}get nzErrorTip(){return this.to.nzErrorTip}get nzValidatingTip(){return this.to.nzValidatingTip}get nzAutoTips(){return this.to.nzAutoTips}get nzDisableAutoTips(){return this.to.nzDisableAutoTips}ngOnInit(){}ngOnChanges(){}}return f.\u0275fac=function(u){return new(u||f)(l.Y36(k.o))},f.\u0275cmp=l.Xpm({type:f,selectors:[["app-form-field-wrapper"]],hostVars:6,hostBindings:function(u,m){2&u&&l.ekj("ant-form-horizontal","horizontal"===m.nzLayout)("ant-form-vertical","vertical"===m.nzLayout)("ant-form-inline","inline"===m.nzLayout)},features:[l.qOj,l.TTD],decls:9,vars:2,consts:[["nzDescription","Ant Design, a design language for background applications, is refined by Ant UED Team"],["fieldComponent",""]],template:function(u,m){1&u&&(l.TgZ(0,"nz-list"),l.TgZ(1,"nz-list-item"),l.TgZ(2,"nz-list-item-meta",0),l.TgZ(3,"nz-list-item-meta-title"),l._uU(4),l.qZA(),l.TgZ(5,"nz-list-item-meta-description"),l._uU(6),l.qZA(),l.qZA(),l.GkF(7,null,1),l.qZA(),l.qZA()),2&u&&(l.xp6(4),l.Oqu(m.to.title),l.xp6(2),l.Oqu(m.to.description))},directives:[D.n_,D.AA,D.yi,D.IO,D.Pb],encapsulation:2,changeDetection:0}),f})();function de(f,v){var u;return`This value should be more than ${null===(u=v.templateOptions)||void 0===u?void 0:u.min}`}function ce(f,v){var u;return`This value should be less than ${null===(u=v.templateOptions)||void 0===u?void 0:u.max}`}function pe(f,v){var u;return`"${null===(u=v.formControl)||void 0===u?void 0:u.value}" is not a valid IP Address`}let me=(()=>{class f{}return f.\u0275fac=function(u){return new(u||f)},f.\u0275mod=l.oAB({type:f}),f.\u0275inj=l.cJS({imports:[[V.ez,s.UX,S.U5,L.cg,D.Ph,k.X0.forChild({wrappers:[{name:"form",component:ne},{name:"inline",component:q},{name:"table",component:te},{name:"list-item",component:R}],validators:[],validationMessages:[{name:"ip",message:pe},{name:"required",message:"This field is required"},{name:"min",message:de},{name:"max",message:ce}]})],D.Ph]}),f})()},8776:(Te,ee,g)=>{g.d(ee,{hv:()=>Be,fS:()=>ue,n2:()=>Ze,VQ:()=>$e,o:()=>z,cw:()=>Ee,T7:()=>Ne,X0:()=>Xe});var V=g(9808),s=g(5e3);function D(n,e){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(n);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(n,o[i])&&(t[o[i]]=n[o[i]])}return t}var u=g(7545),m=g(2986),_=g(5778),b=g(13),c=(g(2198),g(1059),g(4850)),d=g(3075),h=g(4715),T=g(8929),w=(g(6787),g(1086)),ie=g(2916),ge=g(2313);const ye=["content"];function ke(n,e){if(1&n&&s._UZ(0,"formly-field",2),2&n){const t=e.$implicit;s.Q6J("form",t.form)("options",t.options)("model",t.model)("field",t)}}const ze=["*"],Ae=["container"];function De(n,e){}const Ie=["fieldComponent"];function Ve(n,e){1&n&&s._UZ(0,"formly-field",1),2&n&&s.Q6J("field",e.$implicit)}function Re(n,e,t){if(e.id)return e.id;let o=e.type;return!o&&e.template&&(o="template"),le(o)&&(o=o.prototype.constructor.name),[n,o,e.key,t].join("_")}function $(n){if(!n.key)return[];if(!n._keyPath||n._keyPath.key!==n.key){let e=[];if("string"==typeof n.key){const t=-1===n.key.indexOf("[")?n.key:n.key.replace(/\[(\w+)\]/g,".$1");e=-1!==t.indexOf(".")?t.split("."):[t]}else e=Array.isArray(n.key)?n.key.slice(0):[`${n.key}`];n._keyPath={key:n.key,path:e}}return n._keyPath.path.slice(0)}const Ce=["required","pattern","minLength","maxLength","min","max"];function re(n,e){let t=$(n);if(0===t.length)return;let o=n;for(;o.parent;)o=o.parent,t=[...$(o),...t];if(void 0===e&&n.resetOnHide){const i=t.pop();delete t.reduce((a,p)=>a[p]||{},o.model)[i]}else!function je(n,e,t){for(let o=0;o<e.length-1;o++){const i=e[o];(!n[i]||!Z(n[i]))&&(n[i]=/^\d+$/.test(e[o+1])?[]:{}),n=n[i]}n[e[e.length-1]]=P(t)}(o.model,t,e)}function se(n){let e=n.parent.model;for(const t of $(n)){if(!e)return e;e=e[t]}return e}function Q(n,...e){return e.forEach(t=>{for(let o in t)B(n[o])||Le(n[o])?n[o]=P(t[o]):We(n[o],t[o])&&Q(n[o],t[o])}),n}function B(n){return null==n}function ae(n){return void 0===n}function Le(n){return""===n}function le(n){return"function"==typeof n}function We(n,e){return Z(n)&&Z(e)&&Object.getPrototypeOf(n)===Object.getPrototypeOf(e)&&!(Array.isArray(n)||Array.isArray(e))}function Z(n){return null!=n&&"object"==typeof n}function P(n){if(!Z(n)||(0,h.b)(n)||n instanceof s.Rgc||n.changingThisBreaksApplicationSecurity||-1!==["RegExp","FileList","File","Blob"].indexOf(n.constructor.name))return n;if(n instanceof Set)return new Set(n);if(n instanceof Map)return new Map(n);if(n._isAMomentObject&&le(n.clone))return n.clone();if(n instanceof d.TO)return null;if(n instanceof Date)return new Date(n.getTime());if(Array.isArray(n))return n.slice(0).map(o=>P(o));const e=Object.getPrototypeOf(n);let t=Object.create(e);return t=Object.setPrototypeOf(t,e),Object.keys(n).reduce((o,i)=>{const r=Object.getOwnPropertyDescriptor(n,i);return r.get?Object.defineProperty(o,i,r):o[i]=P(n[i]),o},t)}function M(n,e,t){Object.defineProperty(n,e,{enumerable:!1,writable:!0,configurable:!0}),n[e]=t}function G(n,e,t){n._observers||M(n,"_observers",{}),n._observers[e]||(n._observers[e]=[]);let o=n._observers[e];return-1===o.indexOf(t)&&(o.push(t),t({currentValue:n[e],firstChange:!0}),1===o.length&&(M(n,`___$${e}`,n[e]),Object.defineProperty(n,e,{configurable:!0,get:()=>n[`___$${e}`],set:i=>{if(i!==n[`___$${e}`]){const r=n[`___$${e}`];n[`___$${e}`]=i,o.forEach(a=>a({previousValue:r,currentValue:i,firstChange:!1}))}}}))),()=>o.splice(o.indexOf(t),1)}const J=new s.OlP("FORMLY_CONFIG");class z{constructor(){this.types={},this.validators={},this.wrappers={},this.messages={},this.templateManipulators={preWrapper:[],postWrapper:[]},this.extras={checkExpressionOn:"changeDetectionCheck",lazyRender:!1,showError:function(e){return e.formControl&&e.formControl.invalid&&(e.formControl.touched||e.options.parentForm&&e.options.parentForm.submitted||!(!e.field.validation||!e.field.validation.show))}},this.extensions={}}addConfig(e){e.types&&e.types.forEach(t=>this.setType(t)),e.validators&&e.validators.forEach(t=>this.setValidator(t)),e.wrappers&&e.wrappers.forEach(t=>this.setWrapper(t)),e.manipulators&&(console.warn("NgxFormly: passing 'manipulators' config is deprecated, use custom extension instead."),e.manipulators.forEach(t=>this.setManipulator(t))),e.validationMessages&&e.validationMessages.forEach(t=>this.addValidatorMessage(t.name,t.message)),e.extensions&&e.extensions.forEach(t=>this.extensions[t.name]=t.extension),e.extras&&(this.extras=Object.assign({},this.extras,e.extras))}setType(e){Array.isArray(e)?e.forEach(t=>this.setType(t)):(this.types[e.name]||(this.types[e.name]={name:e.name}),["component","extends","defaultOptions","wrappers"].forEach(t=>{e.hasOwnProperty(t)&&(this.types[e.name][t]=e[t])}))}getType(e){if(!this.types[e])throw new Error(`[Formly Error] The type "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.mergeExtendedType(e),this.types[e]}getMergedField(e={}){const t=this.getType(e.type);t.defaultOptions&&Q(e,t.defaultOptions);const o=t.extends&&this.getType(t.extends).defaultOptions;o&&Q(e,o),e&&e.optionsTypes&&e.optionsTypes.forEach(r=>{const a=this.getType(r).defaultOptions;a&&Q(e,a)});const i=this.resolveFieldTypeRef(e);i&&i.instance&&i.instance.defaultOptions&&Q(e,i.instance.defaultOptions),!e.wrappers&&t.wrappers&&(e.wrappers=[...t.wrappers])}resolveFieldTypeRef(e={}){if(!e.type)return null;const t=this.getType(e.type);if(!t.component||t._componentRef)return t._componentRef;const{_resolver:o,_injector:i}=e.parent.options,r=o.resolveComponentFactory(t.component).create(i);return M(t,"_componentRef",r),r.destroy(),t._componentRef}setWrapper(e){this.wrappers[e.name]=e,e.types&&e.types.forEach(t=>{this.setTypeWrapper(t,e.name)})}getWrapper(e){if(!this.wrappers[e])throw new Error(`[Formly Error] The wrapper "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.wrappers[e]}setTypeWrapper(e,t){this.types[e]||(this.types[e]={}),this.types[e].wrappers||(this.types[e].wrappers=[]),-1===this.types[e].wrappers.indexOf(t)&&this.types[e].wrappers.push(t)}setValidator(e){this.validators[e.name]=e}getValidator(e){if(!this.validators[e])throw new Error(`[Formly Error] The validator "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.validators[e]}addValidatorMessage(e,t){this.messages[e]=t}getValidatorMessage(e){return this.messages[e]}setManipulator(e){(new e.class)[e.method](this)}mergeExtendedType(e){if(!this.types[e].extends)return;const t=this.getType(this.types[e].extends);this.types[e].component||(this.types[e].component=t.component),this.types[e].wrappers||(this.types[e].wrappers=t.wrappers)}}z.\u0275fac=function(e){return new(e||z)},z.\u0275prov=s.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),z.ngInjectableDef=(0,s.Ez6)({factory:function(){return new z},token:z,providedIn:"root"});class I{constructor(e,t,o){this.formlyConfig=e,this.componentFactoryResolver=t,this.injector=o}buildForm(e,t=[],o,i){if(!this.formlyConfig.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");const r={fieldGroup:t,model:o,formControl:e,options:this._setOptions(i)};!function Se(n,e){const t=n._updateTreeValidity.bind(n);n._updateTreeValidity=()=>{},e(),n._updateTreeValidity=t}(e,()=>{this._buildForm(r),r.options._checkField(r,!0)})}_buildForm(e){this.getExtensions().forEach(t=>t.prePopulate&&t.prePopulate(e)),this.getExtensions().forEach(t=>t.onPopulate&&t.onPopulate(e)),e.fieldGroup&&e.fieldGroup.forEach(t=>this._buildForm(t)),this.getExtensions().forEach(t=>t.postPopulate&&t.postPopulate(e))}getExtensions(){return Object.keys(this.formlyConfig.extensions).map(e=>this.formlyConfig.extensions[e])}_setOptions(e){return(e=e||{}).formState=e.formState||{},e.showError||(e.showError=this.formlyConfig.extras.showError),e.fieldChanges||M(e,"fieldChanges",new T.xQ),e._resolver||M(e,"_resolver",this.componentFactoryResolver),e._injector||M(e,"_injector",this.injector),e._hiddenFieldsForCheck||(e._hiddenFieldsForCheck=[]),e._markForCheck||(e._markForCheck=t=>{t._componentRefs&&t._componentRefs.forEach(o=>{o.injector.get(s.sBO).markForCheck()}),t.fieldGroup&&t.fieldGroup.forEach(o=>e._markForCheck(o))}),e._buildField||(e._buildField=t=>(this._setOptions(t.options),this._buildForm(t),t.options._checkField(t,!0),t)),e}}function Fe(n,e=!1){const t=n.formControl,o=t._fields?t._fields.indexOf(n):-1;-1!==o&&t._fields.splice(o,1);const i=t.parent;if(!i)return;const r={emitEvent:e};if(i instanceof d.Oe){const a=i.controls.findIndex(p=>p===t);-1!==a&&ve(i,r,()=>i.removeAt(a))}else if(i instanceof d.cw){const a=$(n),p=a[a.length-1];i.get([p])===t&&ve(i,r,()=>i.removeControl(p))}t.setParent(null)}function xe(n){if(n.formControl)return n.formControl;if(!1===n.shareFormControl)return null;const e=n.parent.formControl;return e?e.get($(n)):null}function be(n,e,t=!1){(e=e||n.formControl)._fields||M(e,"_fields",[]),-1===e._fields.indexOf(n)&&e._fields.push(n),!n.formControl&&e&&(M(n,"formControl",e),e.setValidators(null),e.setAsyncValidators(null),n.templateOptions.disabled=!!n.templateOptions.disabled,G(n.templateOptions,"disabled",({firstChange:p,currentValue:C})=>{p||(C?n.formControl.disable():n.formControl.enable())}),e.registerOnDisabledChange&&e.registerOnDisabledChange(p=>{n.templateOptions.___$disabled=p,n.options&&n.options._markForCheck(n)}));let o=n.parent.formControl;if(!o||!n.key)return;const i=$(n),r=se(n);(!B(e.value)||!B(r))&&e.value!==r&&e instanceof d.NI&&e.patchValue(r);for(let p=0;p<i.length-1;p++){const C=i[p];o.get([C])||ve(o,{emitEvent:t},()=>o.setControl(C,new d.cw({}))),o=o.get([C])}const a=i[i.length-1];!n._hide&&o.get([a])!==e&&ve(o,{emitEvent:t},()=>o.setControl(a,e))}function Oe(n,e=!1){const t=n.status,o=n.value;n.updateValueAndValidity({emitEvent:!1,onlySelf:e}),t!==n.status&&n.statusChanges.emit(n.status),o!==n.value&&n.valueChanges.emit(n.value)}function ve(n,e,t){n instanceof d.cw&&!n.__patchForEachChild&&(M(n,"__patchForEachChild",!0),n._forEachChild=i=>{Object.keys(n.controls).forEach(r=>n.controls[r]&&i(n.controls[r],r))});const o=n.updateValueAndValidity.bind(n);!1===e.emitEvent&&(n.updateValueAndValidity=i=>{o(Object.assign({},i||{},{emitEvent:!1}))}),t(),!1===e.emitEvent&&(n.updateValueAndValidity=o)}function we(n){n._fields&&delete n._fields,n.setValidators(null),n.setAsyncValidators(null),(n instanceof d.cw||n instanceof d.Oe)&&Object.keys(n.controls).forEach(e=>we(n.controls[e]))}I.\u0275fac=function(e){return new(e||I)(s.LFG(z),s.LFG(s._Vd),s.LFG(s.zs3))},I.\u0275prov=s.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I.ngInjectableDef=(0,s.Ez6)({factory:function(){return new I((0,s.f3M)(z),(0,s.f3M)(s._Vd),(0,s.f3M)(s.gxx))},token:I,providedIn:"root"});let Ne=(()=>{class n{constructor(t,o,i,r,a){this.formlyBuilder=t,this.formlyConfig=o,this.ngZone=i,this.parentFormGroup=a,this.modelChange=new s.vpe,this.immutable=!1,this._modelChangeValue={},this.modelChangeSubs=[],this.modelChange$=new T.xQ,this.modelChangeSub=this.modelChange$.pipe((0,u.w)(()=>this.ngZone.onStable.asObservable().pipe((0,m.q)(1)))).subscribe(()=>this.ngZone.runGuarded(()=>{this.checkExpressionChange(),this.modelChange.emit(this._modelChangeValue=P(this.model))})),null!==r&&console.warn("NgxFormly: passing 'immutable' attribute to 'formly-form' component is deprecated since v5.5, enable immutable mode through NgModule declaration instead."),this.immutable=null!==r||!!o.extras.immutable}set model(t){this._model=this.immutable?P(t):t}get model(){return this._model||(this._model={}),this._model}set fields(t){this._fields=this.immutable?P(t):t}get fields(){return this._fields||[]}set options(t){this._options=this.immutable?P(t):t}get options(){return this._options}set content(t){if(t){let o=!1,i=t.nativeElement.nextSibling;for(;i&&!o;)(i.nodeType===Node.ELEMENT_NODE||i.nodeType===Node.TEXT_NODE&&i.textContent&&""!==i.textContent.trim())&&(o=!0),i=i.nextSibling;o&&console.warn("NgxFormly: content projection for 'formly-form' component is deprecated since v5.5, you should avoid passing content inside the 'formly-form' tag.")}}ngDoCheck(){"changeDetectionCheck"===this.formlyConfig.extras.checkExpressionOn&&this.checkExpressionChange()}ngOnChanges(t){t.model&&this.field&&(this.field.model=this.model),t.fields&&this.form&&we(this.form),(t.fields||t.form||t.model&&this._modelChangeValue!==t.model.currentValue)&&(this.form=this.form||new d.cw({}),this.setOptions(),this.options.updateInitialValue(),this.clearModelSubscriptions(),this.formlyBuilder.buildForm(this.form,this.fields,this.model,this.options),this.trackModelChanges(this.fields))}ngOnDestroy(){this.modelChangeSub.unsubscribe(),this.clearModelSubscriptions()}changeModel({value:o,field:i}){re(i,o),this.modelChange$.next()}setOptions(){this.options||(this.options={}),this.options.resetModel||(this.options.resetModel=t=>{t=P(B(t)?this.options._initialModel:t),this.model&&(Object.keys(this.model).forEach(o=>delete this.model[o]),Object.assign(this.model,t||{})),this.options._buildForm(),this.options.parentForm&&this.options.parentForm.control===this.form?this.options.parentForm.resetForm(this.model):this.form.reset(this.model)}),!this.options.parentForm&&this.parentFormGroup&&(M(this.options,"parentForm",this.parentFormGroup),G(this.options.parentForm,"submitted",({firstChange:t})=>{t||(this.checkExpressionChange(),this.options._markForCheck({fieldGroup:this.fields,model:this.model,formControl:this.form,options:this.options}))})),this.options.updateInitialValue||(this.options.updateInitialValue=()=>this.options._initialModel=P(this.model)),this.options._buildForm||(this.options._buildForm=(t=!1)=>{this.clearModelSubscriptions(),this.formlyBuilder.buildForm(this.form,this.fields,this.model,this.options),this.trackModelChanges(this.fields),t&&this.modelChange.emit(this._modelChangeValue=P(this.model))}),this.options._trackModelChanges||(this.options._trackModelChanges=(t=!1)=>{this.clearModelSubscriptions(),this.trackModelChanges(this.fields),t&&this.modelChange.emit(this._modelChangeValue=P(this.model))})}checkExpressionChange(){this.options&&this.options._checkField&&this.options._checkField({fieldGroup:this.fields,model:this.model,formControl:this.form,options:this.options})}trackModelChanges(t,o=[]){t.forEach(i=>{if(i.key&&!i.fieldGroup&&i.formControl){const r=i.formControl;let a=r.valueChanges.pipe((0,_.x)((F,x)=>!(F!==x||Array.isArray(F)||Z(F))));const{updateOn:p,debounce:C}=i.modelOptions;(!p||"change"===p)&&C&&C.default>0&&(a=r.valueChanges.pipe((0,b.b)(C.default))),this.modelChangeSubs.push(a.subscribe(F=>{r instanceof d.NI&&r._fields&&r._fields.length>1&&r.patchValue(F,{emitEvent:!1,onlySelf:!0}),i.parsers&&i.parsers.length>0&&i.parsers.forEach(x=>F=x(F)),this.changeModel({key:[...o,...$(i)].join("."),value:F,field:i})}));const y=r.valueChanges.observers;y&&y.length>1&&y.unshift(y.pop())}i.fieldGroup&&i.fieldGroup.length>0&&this.trackModelChanges(i.fieldGroup,i.key?[...o,...$(i)]:o)})}clearModelSubscriptions(){this.modelChangeSubs.forEach(t=>t.unsubscribe()),this.modelChangeSubs=[]}get field(){return this.fields&&this.fields[0]&&this.fields[0].parent}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(I),s.Y36(z),s.Y36(s.R0b),s.$8M("immutable"),s.Y36(d.sg,8))},n.\u0275cmp=s.Xpm({type:n,selectors:[["formly-form"]],viewQuery:function(t,o){if(1&t&&s.Gf(ye,5),2&t){let i;s.iGM(i=s.CRH())&&(o.content=i.first)}},inputs:{model:"model",fields:"fields",options:"options",form:"form"},outputs:{modelChange:"modelChange"},features:[s._Bn([I]),s.TTD],ngContentSelectors:ze,decls:4,vars:1,consts:[["hide-deprecation","",3,"form","options","model","field",4,"ngFor","ngForOf"],["content",""],["hide-deprecation","",3,"form","options","model","field"]],template:function(t,o){1&t&&(s.F$t(),s.YNc(0,ke,1,4,"formly-field",0),s.ynx(1,null,1),s.Hsn(3),s.BQk()),2&t&&s.Q6J("ngForOf",o.fields)},directives:function(){return[V.sg,Ee]},encapsulation:2}),n})(),Ee=(()=>{class n{constructor(t,o,i,r,a){this.formlyConfig=t,this.renderer=o,this.resolver=i,this.elementRef=r,this.warnDeprecation=!1,this.modelChange=new s.vpe,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.detectFieldBuild=!1,this.warnDeprecation=null===a}set model(t){this.warnDeprecation&&console.warn(`NgxFormly: passing 'model' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}set form(t){this.warnDeprecation&&console.warn(`NgxFormly: passing 'form' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}set options(t){this.warnDeprecation&&console.warn(`NgxFormly: passing 'options' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}ngAfterContentInit(){this.triggerHook("afterContentInit")}ngAfterContentChecked(){this.triggerHook("afterContentChecked")}ngAfterViewInit(){this.triggerHook("afterViewInit")}ngAfterViewChecked(){this.triggerHook("afterViewChecked")}ngDoCheck(){this.triggerHook("doCheck"),this.detectFieldBuild&&this.field&&this.field.options&&this.render()}ngOnInit(){this.triggerHook("onInit")}ngOnChanges(t){this.triggerHook("onChanges",t)}ngOnDestroy(){this.resetRefs(this.field),this.hostObservers.forEach(t=>t()),this.hooksObservers.forEach(t=>t()),this.triggerHook("onDestroy")}renderField(t,o,i=[]){if(this.containerRef===t&&(this.resetRefs(this.field),this.containerRef.clear(),i=this.field?this.field.wrappers:[]),i&&i.length>0){const[r,...a]=i,{component:p}=this.formlyConfig.getWrapper(r),C=t.createComponent(this.resolver.resolveComponentFactory(p));this.attachComponentRef(C,o),G(C.instance,"fieldComponent",({firstChange:y,previousValue:F,currentValue:x})=>{if(x){if(F&&F._lContainer===x._lContainer)return;const O=F?F.detach():null;O&&!O.destroyed?x.insert(O):this.renderField(x,o,a),!y&&C.changeDetectorRef.detectChanges()}})}else if(o&&o.type){const{component:r}=this.formlyConfig.getType(o.type),a=t.createComponent(this.resolver.resolveComponentFactory(r));this.attachComponentRef(a,o)}}triggerHook(t,o){if(this.field&&this.field.hooks&&this.field.hooks[t]&&(!o||o.field)){const i=this.field.hooks[t](this.field);if((0,h.b)(i)&&-1!==["onInit","afterContentInit","afterViewInit"].indexOf(t)){const r=i.subscribe();this.hooksObservers.push(()=>r.unsubscribe())}}this.field&&this.field.lifecycle&&this.field.lifecycle[t]&&this.field.lifecycle[t](this.field.form,this.field,this.field.model,this.field.options),"onChanges"===t&&o.field&&(this.resetRefs(o.field.previousValue),this.render())}attachComponentRef(t,o){this.componentRefs.push(t),o._componentRefs.push(t),Object.assign(t.instance,{field:o})}render(){if(this.field){if(!this.field.options)return void(this.detectFieldBuild=!0);this.detectFieldBuild=!1,this.hostObservers.forEach(t=>t()),this.hostObservers=[G(this.field,"hide",({firstChange:t,currentValue:o})=>{(!t||t&&o)&&this.renderer.setStyle(this.elementRef.nativeElement,"display",o?"none":""),this.formlyConfig.extras.lazyRender?o?(this.containerRef.clear(),this.field.className&&this.renderer.removeAttribute(this.elementRef.nativeElement,"class")):(this.renderField(this.containerRef,this.field),this.field.className&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",this.field.className)):t&&this.renderField(this.containerRef,this.field)}),G(this.field,"className",({firstChange:t,currentValue:o})=>{(!t||t&&o)&&(!this.formlyConfig.extras.lazyRender||!0!==this.field.hide)&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",o)})]}}resetRefs(t){t&&(t._componentRefs?t._componentRefs=t._componentRefs.filter(o=>-1===this.componentRefs.indexOf(o)):M(this.field,"_componentRefs",[])),this.componentRefs=[]}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(z),s.Y36(s.Qsj),s.Y36(s._Vd),s.Y36(s.SBq),s.$8M("hide-deprecation"))},n.\u0275cmp=s.Xpm({type:n,selectors:[["formly-field"]],viewQuery:function(t,o){if(1&t&&s.Gf(Ae,7,s.s_b),2&t){let i;s.iGM(i=s.CRH())&&(o.containerRef=i.first)}},inputs:{model:"model",form:"form",options:"options",field:"field"},outputs:{modelChange:"modelChange"},features:[s.TTD],decls:2,vars:0,consts:[["container",""]],template:function(t,o){1&t&&s.YNc(0,De,0,0,"ng-template",null,0,s.W1O)},encapsulation:2}),n})(),$e=(()=>{class n{constructor(t,o,i){this.renderer=t,this.elementRef=o,this.uiAttributesCache={},this.uiAttributes=null,this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress","focus","blur","change"],callback:(r,a)=>{switch(r){case"focus":return this.onFocus(a);case"blur":return this.onBlur(a);case"change":return this.onChange(a);default:return this.to[r](this.field,a)}}},this.document=i}get to(){return this.field.templateOptions||{}}get fieldAttrElements(){return this.field&&this.field._elementRefs||[]}ngOnChanges(t){t.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach(o=>o()),this.uiEvents.events.forEach(o=>{(this.to&&this.to[o]||-1!==["focus","blur","change"].indexOf(o))&&this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement,o,i=>this.uiEvents.callback(o,i)))}),this.to&&this.to.attributes&&G(this.to,"attributes",({currentValue:o,previousValue:i})=>{i&&Object.keys(i).forEach(r=>this.removeAttribute(r)),o&&Object.keys(o).forEach(r=>{null!=o[r]&&this.setAttribute(r,o[r])})}),this.detachElementRef(t.field.previousValue),this.attachElementRef(t.field.currentValue),1===this.fieldAttrElements.length&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),G(this.field,"focus",({currentValue:o})=>{this.toggleFocus(o)}))),t.id&&this.setAttribute("id",this.id)}ngDoCheck(){if(!this.uiAttributes){const t=this.elementRef.nativeElement;this.uiAttributes=[...Ce,"tabindex","placeholder","readonly","disabled","step"].filter(o=>!t.hasAttribute||!t.hasAttribute(o))}this.uiAttributes.forEach(t=>{const o=this.to[t];this.uiAttributesCache[t]!==o&&(!this.to.attributes||!this.to.attributes.hasOwnProperty(t.toLowerCase()))&&(this.uiAttributesCache[t]=o,o||0===o?this.setAttribute(t,!0===o?t:`${o}`):this.removeAttribute(t))})}ngOnDestroy(){this.uiEvents.listeners.forEach(t=>t()),this.detachElementRef(this.field)}toggleFocus(t){const o=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(!o||!o.nativeElement.focus)return;const i=!!this.document.activeElement&&this.fieldAttrElements.some(({nativeElement:r})=>this.document.activeElement===r||r.contains(this.document.activeElement));t&&!i?Promise.resolve().then(()=>o.nativeElement.focus()):!t&&i&&Promise.resolve().then(()=>o.nativeElement.blur())}onFocus(t){this.field.___$focus=!0,this.to.focus&&this.to.focus(this.field,t)}onBlur(t){this.field.___$focus=!1,this.to.blur&&this.to.blur(this.field,t)}onHostChange(t){t instanceof Event||this.onChange(t)}onChange(t){this.to.change&&this.to.change(this.field,t),this.field.formControl&&this.field.formControl.markAsDirty()}attachElementRef(t){!t||(t._elementRefs&&-1===t._elementRefs.indexOf(this.elementRef)?t._elementRefs.push(this.elementRef):M(t,"_elementRefs",[this.elementRef]))}detachElementRef(t){const o=t&&t._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;-1!==o&&this.field._elementRefs.splice(o,1)}setAttribute(t,o){this.renderer.setAttribute(this.elementRef.nativeElement,t,o)}removeAttribute(t){this.renderer.removeAttribute(this.elementRef.nativeElement,t)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(s.Qsj),s.Y36(s.SBq),s.Y36(V.K0))},n.\u0275dir=s.lG2({type:n,selectors:[["","formlyAttributes",""]],hostBindings:function(t,o){1&t&&s.NdJ("change",function(r){return o.onHostChange(r)})},inputs:{field:["formlyAttributes","field"],id:"id"},features:[s.TTD]}),n})(),ue=(()=>{class n{get model(){return this.field.model}set model(t){console.warn(`NgxFormly: passing 'model' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}get form(){return this.field.parent.formControl}set form(t){console.warn(`NgxFormly: passing 'form' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}get options(){return this.field.options}set options(t){console.warn(`NgxFormly: passing 'options' input to '${this.constructor.name}' component is not required anymore, you may remove it!`)}get key(){return this.field.key}get formControl(){return this.field.formControl}get to(){return this.field.templateOptions||{}}get showError(){return this.options.showError(this)}get id(){return this.field.id}get formState(){return this.options.formState||{}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=s.lG2({type:n,inputs:{model:"model",form:"form",options:"options",field:"field"}}),n})(),Be=(()=>{class n extends ue{constructor(t){super(),this.defaultOptions={defaultValue:[]},t instanceof I&&console.warn(`NgxFormly: passing 'FormlyFormBuilder' to '${this.constructor.name}' type is not required anymore, you may remove it!`)}get formControl(){return this.field.formControl}onPopulate(t){!t.formControl&&t.key&&be(t,xe(t)||new d.Oe([],{updateOn:t.modelOptions.updateOn})),t.fieldGroup=t.fieldGroup||[];const o=t.model?t.model.length:0;if(t.fieldGroup.length>o)for(let i=t.fieldGroup.length-1;i>=o;--i)Fe(t.fieldGroup[i],!0),t.fieldGroup.splice(i,1);for(let i=t.fieldGroup.length;i<o;i++){const r=Object.assign({},P(t.fieldArray),{key:`${i}`});t.fieldGroup.push(r)}}add(t,o,{markAsDirty:i}={markAsDirty:!0}){t=B(t)?this.field.fieldGroup.length:t,this.model||re(this.field,[]),this.model.splice(t,0,o?P(o):void 0),this._build(),i&&this.formControl.markAsDirty()}remove(t,{markAsDirty:o}={markAsDirty:!0}){this.model.splice(t,1),Fe(this.field.fieldGroup[t],!0),this.field.fieldGroup.splice(t,1),this.field.fieldGroup.forEach((i,r)=>i.key=`${r}`),this._build(),o&&this.formControl.markAsDirty()}_build(){this.options._buildField(this.field),this.options._trackModelChanges(!0)}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(J,8))},n.\u0275dir=s.lG2({type:n,selectors:[["fieldArray"]],features:[s.qOj]}),n})(),Ze=(()=>{class n extends ue{}return n.\u0275fac=function(){let e;return function(o){return(e||(e=s.n5z(n)))(o||n)}}(),n.\u0275dir=s.lG2({type:n,viewQuery:function(t,o){if(1&t&&s.Gf(Ie,5,s.s_b),2&t){let i;s.iGM(i=s.CRH())&&(o.fieldComponent=i.first)}},features:[s.qOj]}),n})(),He=(()=>{class n extends ue{constructor(){super(...arguments),this.defaultOptions={defaultValue:{}}}}return n.\u0275fac=function(){let e;return function(o){return(e||(e=s.n5z(n)))(o||n)}}(),n.\u0275cmp=s.Xpm({type:n,selectors:[["formly-group"]],hostVars:2,hostBindings:function(t,o){2&t&&s.Tol(o.field.fieldGroupClassName||"")},features:[s.qOj],ngContentSelectors:ze,decls:2,vars:1,consts:[[3,"field",4,"ngFor","ngForOf"],[3,"field"]],template:function(t,o){1&t&&(s.F$t(),s.YNc(0,Ve,1,1,"formly-field",0),s.Hsn(1)),2&t&&s.Q6J("ngForOf",o.field.fieldGroup)},directives:[V.sg,Ee],encapsulation:2}),n})(),Ue=(()=>{class n extends ue{constructor(t){super(),this.sanitizer=t,this.innerHtml={content:null,template:null}}get template(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.to.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content}}return n.\u0275fac=function(t){return new(t||n)(s.Y36(ge.H7))},n.\u0275cmp=s.Xpm({type:n,selectors:[["formly-template"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(t,o){1&t&&s._UZ(0,"div",0),2&t&&s.Q6J("innerHtml",o.template,s.oJD)},encapsulation:2}),n})();function Me(n,e,t){return n instanceof Function?n.apply(e,t):!!n}class Ke{prePopulate(e){if(e.parent||e.options._checkField)return;let t=!1;e.options._checkField=(o,i)=>{t||(t=!0,this.checkField(o,i),t=!1)}}postPopulate(e){if(e.parent&&!e._expressionProperties){if(M(e,"_expressionProperties",{}),e.expressionProperties)for(const t in e.expressionProperties){const o=e.expressionProperties[t];if("string"==typeof o||le(o))e._expressionProperties[t]={expression:this._evalExpression(t,o,"templateOptions.disabled"===t&&e.parent.expressionProperties&&e.parent.expressionProperties.hasOwnProperty("templateOptions.disabled")?()=>e.parent.templateOptions.disabled:void 0)},"templateOptions.disabled"===t&&Object.defineProperty(e._expressionProperties[t],"expressionValue",{get:()=>e.templateOptions.disabled,set:()=>{},enumerable:!0,configurable:!0});else if(o instanceof ie.y){const i=()=>o.subscribe(C=>{this.setExprValue(e,t,C),e.options&&e.options._markForCheck&&e.options._markForCheck(e)});let r=i();const a=e.hooks.onInit;e.hooks.onInit=()=>(null===r&&(r=i()),a&&a(e));const p=e.hooks.onDestroy;e.hooks.onDestroy=()=>{p&&p(e),r.unsubscribe(),r=null}}}e.hideExpression?(delete e.hide,e.hideExpression=this._evalExpression("hide",e.hideExpression,()=>{let t=e.parent;for(;t.parent&&!t.hide;)t=t.parent;return t.hide})):G(e,"hide",({currentValue:t,firstChange:o})=>{e._hide=t,(!o||o&&!0===t)&&e.options._hiddenFieldsForCheck.push(e)})}}_evalExpression(e,t,o){return(...i)=>{try{return"string"==typeof t&&(t=function Ye(n,e){try{return-1!==n.indexOf("this.field")&&console.warn("NgxFormly: using 'this.field' in expressionProperties is deprecated since v5.1, use 'field' instead."),Function(...e,`return ${n};`)}catch(t){console.error(t)}}(t,["model","formState","field"])),"function"!=typeof t&&(t=()=>!!t),o&&o()||t(...i)}catch(r){throw r.message=`[Formly Error] [Expression "${e}"] ${r.message}`,r}}}_evalExpressionPath(e,t){if(e._expressionProperties[t]&&e._expressionProperties[t].expressionPaths)return e._expressionProperties[t].expressionPaths;let o=[];return-1===t.indexOf("[")?o=t.split("."):t.split(/[[\]]{1,2}/).filter(i=>i).forEach(i=>{const r=i.match(/['|"](.*?)['|"]/);r?o.push(r[1]):o.push(...i.split(".").filter(a=>a))}),e._expressionProperties[t]&&(e._expressionProperties[t].expressionPaths=o),o}checkField(e,t=!1){const o=this._checkField(e,t);e.options._hiddenFieldsForCheck.sort(i=>i.hide?-1:1).forEach(i=>this.toggleFormControl(i,!!i.hide,!t)),e.options._hiddenFieldsForCheck=[],o&&(this.checkField(e),e.options&&e.options._markForCheck&&e.options._markForCheck(e))}_checkField(e,t=!1){let o=!1;return e.fieldGroup.forEach(i=>{!i.options||(this.checkFieldExpressionChange(i,t)&&(o=!0),this.checkFieldVisibilityChange(i,t)&&(e.options._hiddenFieldsForCheck.push(i),o=!0),i.fieldGroup&&i.fieldGroup.length>0&&this._checkField(i,t)&&(o=!0))}),o}checkFieldExpressionChange(e,t){if(!e||!e._expressionProperties)return!1;let o=!1;const i=e._expressionProperties;for(const r in i){let a=Me(i[r].expression,{field:e},[e.model,e.options.formState,e,t]);"templateOptions.disabled"===r&&(a=!!a),(t||i[r].expressionValue!==a&&(!Z(a)&&!le(a)||le(a)&&""+i[r].expressionValue!=""+a||(0,h.b)(a)||JSON.stringify(a)!==JSON.stringify(i[r].expressionValue)))&&(o=!0,i[r].expressionValue=a,this.setExprValue(e,r,a))}return o}checkFieldVisibilityChange(e,t){if(!e||B(e.hideExpression))return!1;const o=!!Me(e.hideExpression,{field:e},[e.model,e.options.formState,e,t]);let i=!1;return(o!==e.hide||t)&&(i=!0,e.hide=o,e.templateOptions.hidden=o),i}setDisabledState(e,t){e.fieldGroup&&e.fieldGroup.filter(o=>!o.expressionProperties||!o.expressionProperties.hasOwnProperty("templateOptions.disabled")).forEach(o=>this.setDisabledState(o,t)),e.key&&e.templateOptions.disabled!==t&&(e.templateOptions.disabled=t)}toggleFormControl(e,t,o){if(e.fieldGroup&&e.fieldGroup.filter(i=>!i.hideExpression).forEach(i=>this.toggleFormControl(i,t,o)),e.formControl&&e.key){M(e,"_hide",!(!t&&!e.hide));const i=e.formControl;i._fields&&i._fields.length>1&&Oe(i),!0!==t||i._fields&&!i._fields.every(r=>!!r._hide)?!1===t&&(e.resetOnHide&&e.parent&&!ae(e.defaultValue)&&ae(se(e))&&re(e,e.defaultValue),be(e,void 0,!0),e.resetOnHide&&e.fieldArray&&(e.fieldGroup||[]).length!==(e.model||[]).length&&e.options._buildForm(!0)):(Fe(e,!0),o&&e.resetOnHide&&(e.formControl.reset({value:void 0,disabled:e.formControl.disabled}),e.fieldGroup&&(re(e,void 0),e.formControl instanceof d.Oe&&(e.fieldGroup.length=0))))}e.options.fieldChanges&&e.options.fieldChanges.next({field:e,type:"hidden",value:t})}setExprValue(e,t,o){try{let i=e;const r=this._evalExpressionPath(e,t),a=r.length-1;for(let p=0;p<a;p++)i=i[r[p]];i[r[a]]=o}catch(i){throw i.message=`[Formly Error] [Expression "${t}"] ${i.message}`,i}if("templateOptions.disabled"===t&&e.key&&this.setDisabledState(e,o),0===t.indexOf("model.")){const i=t.replace(/^model\./,""),r=e.key&&t===i?e.formControl:e.parent.formControl.get(i);r&&(!B(r.value)||!B(o))&&r.value!==o&&r.patchValue(o)}this.emitExpressionChanges(e,t,o)}emitExpressionChanges(e,t,o){!e.options.fieldChanges||e.options.fieldChanges.next({field:e,type:"expressionChanges",property:t,value:o})}}class qe{constructor(e){this.formlyConfig=e}onPopulate(e){this.initFieldValidation(e,"validators"),this.initFieldValidation(e,"asyncValidators")}initFieldValidation(e,t){const o=[];if("validators"===t&&!(e.hasOwnProperty("fieldGroup")&&!e.key)&&o.push(this.getPredefinedFieldValidation(e)),e[t])for(const i in e[t])"validation"===i&&!Array.isArray(e[t].validation)&&(e[t].validation=[e[t].validation],console.warn(`NgxFormly(${e.key}): passing a non array value to the 'validation' is deprecated, pass an array instead`)),"validation"===i?o.push(...e[t].validation.map(r=>this.wrapNgValidatorFn(e,r))):o.push(this.wrapNgValidatorFn(e,e[t][i],i));M(e,"_"+t,o)}getPredefinedFieldValidation(e){let t=[];return Ce.forEach(o=>G(e.templateOptions,o,({currentValue:i,firstChange:r})=>{t=t.filter(a=>a!==o),null!=i&&!1!==i&&t.push(o),!r&&e.formControl&&Oe(e.formControl)})),o=>0===t.length?null:d.kI.compose(t.map(i=>()=>{const r=e.templateOptions[i];switch(i){case"required":return d.kI.required(o);case"pattern":return d.kI.pattern(r)(o);case"minLength":return d.kI.minLength(r)(o);case"maxLength":return d.kI.maxLength(r)(o);case"min":return d.kI.min(r)(o);case"max":return d.kI.max(r)(o)}}))(o)}wrapNgValidatorFn(e,t,o){let i=null;if("string"==typeof t&&(i=P(this.formlyConfig.getValidator(t))),"object"==typeof t&&t.name&&(i=P(this.formlyConfig.getValidator(t.name)),t.options&&(i.options=t.options)),"object"==typeof t&&t.expression){const{expression:r}=t,a=D(t,["expression"]);i={name:o,validation:r,options:Object.keys(a).length>0?a:null}}return"function"==typeof t&&(i={name:o,validation:t}),r=>{const a=i.validation(r,e,i.options);return function Ge(n){return!!n&&"function"==typeof n.then}(a)?a.then(p=>this.handleAsyncResult(e,o?!!p:p,i)):(0,h.b)(a)?a.pipe((0,c.U)(p=>this.handleAsyncResult(e,o?!!p:p,i))):this.handleResult(e,o?!!a:a,i)}}handleAsyncResult(e,t,o){return e.options&&e.options._markForCheck&&e.options._markForCheck(e),this.handleResult(e,t,o)}handleResult(e,t,{name:o,options:i}){"boolean"==typeof t&&(t=t?null:{[o]:i||!0});const r=e.formControl;return r._childrenErrors&&r._childrenErrors[o]&&r._childrenErrors[o](),Z(t)&&Object.keys(t).forEach(a=>{const p=t[a].errorPath?t[a].errorPath:(i||{}).errorPath,C=p?e.formControl.get(p):null;if(C){const F=D(t[a],["errorPath"]);C.setErrors(Object.assign({},C.errors||{},{[a]:F})),!r._childrenErrors&&M(r,"_childrenErrors",{}),r._childrenErrors[a]=()=>{const X=D(C.errors||{},["symbol"==typeof a?a:a+""]);C.setErrors(0===Object.keys(X).length?null:X)}}}),t}}class Qe{constructor(e){this.config=e}prePopulate(e){this.root||(this.root=e)}onPopulate(e){!e.parent||(e.fieldGroup&&!e.key?M(e,"formControl",e.parent.formControl):this.addFormControl(e))}postPopulate(e){this.root===e&&(this.root=null,this.setValidators(e))}addFormControl(e){let t=xe(e);if(!t){const o={updateOn:e.modelOptions.updateOn},i=e.key?se(e):e.defaultValue,r=this.config?this.config.resolveFieldTypeRef(e):null;if(r&&r.componentType&&r.componentType.createControl){const a=r.componentType;console.warn(`NgxFormly: '${a.name}::createControl' is deprecated since v5.0, use 'prePopulate' hook instead.`),t=a.createControl(i,e)}else t=e.fieldGroup?new d.cw({},o):new d.NI(i,o)}be(e,t)}setValidators(e,t=!1){let o=!1;if(!1===t&&e.key&&e.templateOptions&&e.templateOptions.disabled&&(t=!0),(e.fieldGroup||[]).forEach(i=>this.setValidators(i,t)&&(o=!0)),e.key||!e.parent||!e.key&&!e.fieldGroup){const{formControl:i}=e;e.templateOptions=e.templateOptions||{},e.key&&i&&i instanceof d.NI&&(t&&i.enabled&&(i.disable({emitEvent:!1,onlySelf:!0}),o=!0),!t&&i.disabled&&(i.enable({emitEvent:!1,onlySelf:!0}),o=!0)),i&&(null===i.validator||null===i.asyncValidator)&&(i.setValidators(()=>{const r=d.kI.compose(this.mergeValidators(e,"_validators"));return r?r(i):null}),i.setAsyncValidators(()=>{const r=d.kI.composeAsync(this.mergeValidators(e,"_asyncValidators"));return r?r(i):(0,w.of)(null)}),o=!0),o&&Oe(i,!0)}return o}mergeValidators(e,t){const o=[],i=e.formControl;return i&&i._fields&&i._fields.length>1?i._fields.filter(r=>!r._hide).forEach(r=>o.push(...r[t])):e[t]&&o.push(...e[t]),e.fieldGroup&&e.fieldGroup.filter(r=>!r.key&&r.fieldGroup).forEach(r=>o.push(...this.mergeValidators(r,t))),o}}class Je{constructor(e){this.formlyConfig=e,this.formId=0}prePopulate(e){if(this.getFieldComponentInstance(e).prePopulate(),e.parent)return;const t=e.options&&e.options.fieldTransform||this.formlyConfig.extras.fieldTransform;(Array.isArray(t)?t:[t]).forEach(o=>{if(o&&(console.warn("NgxFormly: fieldTransform is deprecated since v5.0, use custom extension instead."),!o(e.fieldGroup,e.model,e.formControl,e.options)))throw new Error("fieldTransform must return an array of fields")})}onPopulate(e){this.initFieldOptions(e),this.getFieldComponentInstance(e).onPopulate(),e.fieldGroup&&e.fieldGroup.forEach((t,o)=>{Object.defineProperty(t,"parent",{get:()=>e,configurable:!0}),Object.defineProperty(t,"index",{get:()=>o,configurable:!0}),this.formId++})}postPopulate(e){this.getFieldComponentInstance(e).postPopulate()}initFieldOptions(e){const t=e.parent;if(t){if(Object.defineProperty(e,"form",{get:()=>t.formControl,configurable:!0}),Object.defineProperty(e,"options",{get:()=>t.options,configurable:!0}),Object.defineProperty(e,"model",{get:()=>e.key&&e.fieldGroup?se(e):t.model,configurable:!0}),Q(e,{id:Re(`formly_${this.formId}`,e,e.index),hooks:{},modelOptions:{},validation:{messages:{}},templateOptions:e.type&&e.key?{label:"",placeholder:"",focus:!1,disabled:!1}:{}}),this.formlyConfig.extras.resetFieldOnHide&&!1!==e.resetOnHide&&(e.resetOnHide=!0),e.lifecycle&&console.warn("NgxFormly: 'lifecycle' is deprecated since v5.0, use 'hooks' instead."),"formly-template"!==e.type&&(e.template||e.expressionProperties&&e.expressionProperties.template)&&(e.type&&console.warn("NgxFormly: passing 'type' property is not allowed when 'template' is set."),e.type="formly-template"),!e.type&&e.fieldGroup&&(e.type="formly-group"),e.type&&this.formlyConfig.getMergedField(e),e.parent){let o=!ae(e.key)&&!ae(e.defaultValue)&&ae(se(e))&&(!e.resetOnHide||!(e.hide||e.hideExpression));if(o&&e.resetOnHide){let i=e.parent;for(;i&&!i.hideExpression&&!i.hide;)i=i.parent;o=!i||!(i.hideExpression||i.hide)}o&&re(e,e.defaultValue)}this.initFieldWrappers(e)}}initFieldWrappers(e){e.wrappers=e.wrappers||[];const t=Object.assign({preWrapper:[],postWrapper:[]},e.templateOptions.templateManipulators||{});e.wrappers=[...this.formlyConfig.templateManipulators.preWrapper.map(o=>o(e)),...t.preWrapper.map(o=>o(e)),...e.wrappers,...this.formlyConfig.templateManipulators.postWrapper.map(o=>o(e)),...t.postWrapper.map(o=>o(e))].filter((o,i,r)=>o&&i===r.indexOf(o))}getFieldComponentInstance(e){const t=this.formlyConfig.resolveFieldTypeRef(e),o=t?t.instance:{};return{prePopulate:()=>o.prePopulate&&o.prePopulate(e),onPopulate:()=>o.onPopulate&&o.onPopulate(e),postPopulate:()=>o.postPopulate&&o.postPopulate(e)}}}function Pe(n){return{types:[{name:"formly-group",component:He},{name:"formly-template",component:Ue}],extensions:[{name:"core",extension:new Je(n)},{name:"field-validation",extension:new qe(n)},{name:"field-form",extension:new Qe(n)},{name:"field-expression",extension:new Ke}]}}let Xe=(()=>{class n{constructor(t,o=[]){!o||o.forEach(i=>t.addConfig(i))}static forRoot(t={}){return{ngModule:n,providers:[{provide:J,multi:!0,useFactory:Pe,deps:[z]},{provide:J,useValue:t,multi:!0},{provide:s.deG,useValue:t,multi:!0},z,I]}}static forChild(t={}){return{ngModule:n,providers:[{provide:J,multi:!0,useFactory:Pe,deps:[z]},{provide:J,useValue:t,multi:!0},{provide:s.deG,useValue:t,multi:!0},I]}}}return n.\u0275fac=function(t){return new(t||n)(s.LFG(z),s.LFG(J,8))},n.\u0275mod=s.oAB({type:n}),n.\u0275inj=s.cJS({imports:[[V.ez]]}),n})()},4390:(Te,ee,g)=>{g.d(ee,{XZ:()=>E,qw:()=>A});var V=g(655),s=g(5e3),k=g(3075),S=g(6831),L=g(591),D=g(1086),H=g(8929),l=g(6053),W=g(3753),he=g(2868),te=g(4850),N=g(7625),oe=g(13),Y=g(2198),ne=g(5778),K=g(6947),q=g(1721),R=g(9808),de=g(9439),ce=g(925),fe=g(7525),pe=g(3390);function _e(c,d){1&c&&(s.TgZ(0,"div",2),s._UZ(1,"nz-spin"),s.qZA())}function me(c,d){}function f(c,d){if(1&c&&(s.TgZ(0,"div",3),s.YNc(1,me,0,0,"ng-template",4),s.qZA()),2&c){const h=s.oxw();s.xp6(1),s.Q6J("ngTemplateOutlet",h.nzToolkit)}}const v="codeEditor";function u(c){return(...d)=>{c&&c(...d)}}const m=new S.t(1);let _="unload",b=(()=>{class c{constructor(h,T){this.nzConfigService=h,this.firstEditorInitialized=!1,this.option={},this.option$=new L.X(this.option);const j=this.nzConfigService.getConfigForComponent(v);this.document=T,this.config=Object.assign({},j),this.config.monacoEnvironment&&(window.MonacoEnvironment=Object.assign({},this.config.monacoEnvironment)),this.option=this.config.defaultEditorOption||{},this.subscription=this.nzConfigService.getConfigChangeEventForComponent(v).subscribe(()=>{const w=this.nzConfigService.getConfigForComponent(v);w&&this._updateDefaultOption(w.defaultEditorOption)})}ngOnDestroy(){this.subscription.unsubscribe(),this.subscription=null}_updateDefaultOption(h){this.option=Object.assign(Object.assign({},this.option),h),this.option$.next(this.option),"theme"in h&&h.theme&&monaco.editor.setTheme(h.theme)}requestToInit(){return"LOADED"===_?(this.onInit(),(0,D.of)(this.getLatestOption())):("unload"===_&&(this.config.useStaticLoading&&"undefined"==typeof monaco?(0,K.ZK)("You choose to use static loading but it seems that you forget to config webpack plugin correctly. Please refer to our official websitefor more details about static loading."):this.loadMonacoScript()),m.pipe((0,he.b)(()=>this.onInit()),(0,te.U)(()=>this.getLatestOption())))}loadMonacoScript(){if(this.config.useStaticLoading)return void Promise.resolve().then(()=>this.onLoad());if("loading"===_)return;_="loading";const h=this.config.assetsRoot,T=h?`${h}/vs`:"assets/vs",j=window,w=this.document.createElement("script");w.type="text/javascript",w.src=`${T}/loader.js`;const ie=()=>{ye(),j.require.config(Object.assign({paths:{vs:T}},this.config.extraConfig)),j.require(["vs/editor/editor.main"],()=>{this.onLoad()})},ge=()=>{throw ye(),new Error(`${K.Bq} cannot load assets of monaco editor from source "${T}".`)},ye=()=>{w.removeEventListener("load",ie),w.removeEventListener("error",ge),this.document.documentElement.removeChild(w)};w.addEventListener("load",ie),w.addEventListener("error",ge),this.document.documentElement.appendChild(w)}onLoad(){_="LOADED",m.next(!0),m.complete(),u(this.config.onLoad)()}onInit(){this.firstEditorInitialized||(this.firstEditorInitialized=!0,u(this.config.onFirstEditorInit)()),u(this.config.onInit)()}getLatestOption(){return Object.assign({},this.option)}}return c.\u0275fac=function(h){return new(h||c)(s.LFG(de.jY),s.LFG(R.K0))},c.\u0275prov=s.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),E=(()=>{class c{constructor(h,T,j,w){this.nzCodeEditorService=h,this.ngZone=T,this.platform=w,this.nzEditorMode="normal",this.nzOriginalText="",this.nzLoading=!1,this.nzFullControl=!1,this.nzEditorInitialized=new s.vpe,this.editorOptionCached={},this.destroy$=new H.xQ,this.resize$=new H.xQ,this.editorOption$=new L.X({}),this.editorInstance=null,this.value="",this.modelSet=!1,this.onDidChangeContentDisposable=null,this.onChange=ie=>{},this.onTouch=()=>{},this.el=j.nativeElement,this.el.classList.add("ant-code-editor")}set nzEditorOption(h){this.editorOption$.next(h)}ngAfterViewInit(){!this.platform.isBrowser||this.nzCodeEditorService.requestToInit().pipe((0,N.R)(this.destroy$)).subscribe(h=>this.setup(h))}ngOnDestroy(){this.onDidChangeContentDisposable&&(this.onDidChangeContentDisposable.dispose(),this.onDidChangeContentDisposable=null),this.editorInstance&&(this.editorInstance.dispose(),this.editorInstance=null),this.destroy$.next(),this.destroy$.complete()}writeValue(h){this.value=h,this.setValue()}registerOnChange(h){this.onChange=h}registerOnTouched(h){this.onTouch=h}layout(){this.resize$.next()}setup(h){this.ngZone.runOutsideAngular(()=>(0,q.ov)().pipe((0,N.R)(this.destroy$)).subscribe(()=>{this.editorOptionCached=h,this.registerOptionChanges(),this.initMonacoEditorInstance(),this.registerResizeChange(),this.setValue(),this.nzFullControl||this.setValueEmitter(),this.nzEditorInitialized.observers.length&&this.ngZone.run(()=>this.nzEditorInitialized.emit(this.editorInstance))}))}registerOptionChanges(){(0,l.aj)([this.editorOption$,this.nzCodeEditorService.option$]).pipe((0,N.R)(this.destroy$)).subscribe(([h,T])=>{this.editorOptionCached=Object.assign(Object.assign(Object.assign({},this.editorOptionCached),T),h),this.updateOptionToMonaco()})}initMonacoEditorInstance(){this.ngZone.runOutsideAngular(()=>{this.editorInstance="normal"===this.nzEditorMode?monaco.editor.create(this.el,Object.assign({},this.editorOptionCached)):monaco.editor.createDiffEditor(this.el,Object.assign({},this.editorOptionCached))})}registerResizeChange(){this.ngZone.runOutsideAngular(()=>{(0,W.R)(window,"resize").pipe((0,oe.b)(300),(0,N.R)(this.destroy$)).subscribe(()=>{this.layout()}),this.resize$.pipe((0,N.R)(this.destroy$),(0,Y.h)(()=>!!this.editorInstance),(0,te.U)(()=>({width:this.el.clientWidth,height:this.el.clientHeight})),(0,ne.x)((h,T)=>h.width===T.width&&h.height===T.height),(0,oe.b)(50)).subscribe(()=>{this.editorInstance.layout()})})}setValue(){if(this.editorInstance){if(this.nzFullControl&&this.value)return void(0,K.ZK)("should not set value when you are using full control mode! It would result in ambiguous data flow!");if("normal"===this.nzEditorMode)if(this.modelSet){const h=this.editorInstance.getModel();this.preservePositionAndSelections(()=>h.setValue(this.value))}else this.editorInstance.setModel(monaco.editor.createModel(this.value,this.editorOptionCached.language)),this.modelSet=!0;else if(this.modelSet){const h=this.editorInstance.getModel();this.preservePositionAndSelections(()=>{h.modified.setValue(this.value),h.original.setValue(this.nzOriginalText)})}else{const h=this.editorOptionCached.language;this.editorInstance.setModel({original:monaco.editor.createModel(this.nzOriginalText,h),modified:monaco.editor.createModel(this.value,h)}),this.modelSet=!0}}}preservePositionAndSelections(h){if(!this.editorInstance)return void h();const T=this.editorInstance.getPosition(),j=this.editorInstance.getSelections();h(),T&&this.editorInstance.setPosition(T),j&&this.editorInstance.setSelections(j)}setValueEmitter(){const h="normal"===this.nzEditorMode?this.editorInstance.getModel():this.editorInstance.getModel().modified;this.onDidChangeContentDisposable=h.onDidChangeContent(()=>{this.emitValue(h.getValue())})}emitValue(h){this.value!==h&&(this.value=h,this.ngZone.run(()=>{this.onChange(h)}))}updateOptionToMonaco(){this.editorInstance&&this.editorInstance.updateOptions(Object.assign({},this.editorOptionCached))}}return c.\u0275fac=function(h){return new(h||c)(s.Y36(b),s.Y36(s.R0b),s.Y36(s.SBq),s.Y36(ce.t4))},c.\u0275cmp=s.Xpm({type:c,selectors:[["nz-code-editor"]],inputs:{nzEditorMode:"nzEditorMode",nzOriginalText:"nzOriginalText",nzLoading:"nzLoading",nzFullControl:"nzFullControl",nzToolkit:"nzToolkit",nzEditorOption:"nzEditorOption"},outputs:{nzEditorInitialized:"nzEditorInitialized"},exportAs:["nzCodeEditor"],features:[s._Bn([{provide:k.JU,useExisting:(0,s.Gpc)(()=>c),multi:!0}])],decls:2,vars:2,consts:[["class","ant-code-editor-loading",4,"ngIf"],["class","ant-code-editor-toolkit",4,"ngIf"],[1,"ant-code-editor-loading"],[1,"ant-code-editor-toolkit"],[3,"ngTemplateOutlet"]],template:function(h,T){1&h&&(s.YNc(0,_e,2,0,"div",0),s.YNc(1,f,2,1,"div",1)),2&h&&(s.Q6J("ngIf",T.nzLoading),s.xp6(1),s.Q6J("ngIf",T.nzToolkit))},directives:[fe.W,R.O5,R.tP],encapsulation:2,changeDetection:0}),(0,V.gn)([(0,q.yF)()],c.prototype,"nzLoading",void 0),(0,V.gn)([(0,q.yF)()],c.prototype,"nzFullControl",void 0),c})(),A=(()=>{class c{}return c.\u0275fac=function(h){return new(h||c)},c.\u0275mod=s.oAB({type:c}),c.\u0275inj=s.cJS({imports:[[R.ez,pe.PV,fe.j]]}),c})()}}]);