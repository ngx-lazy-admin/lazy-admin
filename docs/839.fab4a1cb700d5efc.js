"use strict";(self.webpackChunkgo_admin_ng=self.webpackChunkgo_admin_ng||[]).push([[839],{9839:(Se,Z,r)=>{r.r(Z),r.d(Z,{FormModule:()=>Me});var h=r(9808),a=r(3075),j=r(7429),p=r(8776),C=r(3478),v=r(1945),J=r(7525),T=r(6042),k=r(19),z=r(3640),E=r(4147),w=r(2359),M=r(868),S=r(4390),m=r(325),Y=r(1721),b=r(8929),B=r(7625),F=r(9857),Q=r(3268),A=r(9630),O=r(1008),e=r(5e3),x=r(591),_=r(1086),D=r(2868),L=r(2214),I=r(520);let H=(()=>{class o{constructor(t){this.http=t,this._destroy$=new b.xQ,this._menu$=new x.X(null),this._baseFieldUrl="api",this._menus=[],this._activeMenu=null,this._tabset$=new x.X([]),this._tabset=[],this.breadcrumb=[]}get change$(){return this._menu$.asObservable()}get tabsetChange$(){return this._tabset$.asObservable()}getField(t){return t=t.replace("/blank",""),console.log(t),this.http.get(this._baseFieldUrl+t).pipe((0,D.b)(n=>{console.log(n)}))}getFieldByOf(){return(0,_.of)(L.EP)}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(I.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var R=r(9439),G=r(5527),$=r(4374),U=r(9838),P=r(4409),N=r(2683),X=r(3390);let W=(()=>{class o{constructor(){this.id="",this.onMin=new e.vpe,this.onMax=new e.vpe,this.form=new a.cw({})}min(t){this.click&&this.click("min",t)}max(t){this.click&&this.click("max",t)}close(t){this.click&&this.click("close",t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["custom-modal-content"]],inputs:{fields:"fields",model:"model",nzTitle:"nzTitle",modal:"modal",id:"id",click:"click"},outputs:{onMin:"onMin",onMax:"onMax"},decls:8,vars:1,consts:[[1,"modal-wrap"],["cdkDrag","","cdkDragHandle","","cdkDragRootElement",".ant-modal-content",1,"ant-modal-header","p-0","d-block",2,"cursor","move"],[1,"d-flex","justify-content-between"],[1,"p-3"],[1,"d-flex","align-items-center",2,"cursor","auto"],["nz-icon","","nzType","close","nzTheme","outline",1,"p-3",3,"click"],["id","viewer","name","viewer","allow","fullscreen; xr-spatial-tracking;","src","https://threejs.org/examples/webgl_animation_keyframes.html",2,"display","unset"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"i",5),e.NdJ("click",function(){return n.close(n.id)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(7,"iframe",6),e.qZA()),2&t&&(e.xp6(4),e.hij("",n.nzTitle||"\u6807\u9898"," "))},directives:[P.Zt,P.Bh,N.w,X.Ls],styles:[".modal-wrap[_ngcontent-%COMP%]{margin:-24px;cursor:pointer}.ant-modal-header[_ngcontent-%COMP%]{position:absolute;width:100%;background-color:#0000000d;border:none}iframe#viewer[_ngcontent-%COMP%]{display:block!important;width:1200px;height:500px}"]}),o})(),V=(()=>{class o{constructor(t,n,s){this.modal=t,this.rendererFactory=n,this.document=s,this.currentIndex=500,this._hideAllStatus=!1,this.renderer=this.rendererFactory.createRenderer(null,null)}open(t){var n;const s=this.randomString(32);this._hideAllStatus=!1;const i=this.modal.create(Object.assign({nzContent:W,nzWidth:1200,nzViewContainerRef:this.viewContainerRef,nzZIndex:this.currentIndex,nzStyle:{left:20*this.modal.openModals.length+"px",top:20*this.modal.openModals.length+100+"px"},nzFooter:null,nzComponentParams:{id:s,fields:t.fields,model:t.model,title:t.title,modal:this.modal,click:(d,u)=>{"close"==d?this.close(u):"min"==d&&this.hide(u)}},nzClosable:!1},t));if(i.afterOpen.subscribe(()=>{console.log("[afterOpen] emitted!")}),i.afterClose.subscribe(d=>{console.log("[afterClose] The result is:",d)}),this.renderer.listen(i.containerInstance.modalElementRef.nativeElement,"click",d=>{(i.containerInstance.config.nzZIndex||0)<this.currentIndex&&(i.containerInstance.config.nzZIndex=++this.currentIndex),i.containerInstance.config.nzZIndex=++this.currentIndex}),i){const d=null===(n=i.getElement().parentElement)||void 0===n?void 0:n.parentElement;null==d||d.classList.add("pointer-events-none")}return i}img(){}close(t){const n=this.modal.openModals.find(s=>{var i;return(null===(i=s.componentInstance)||void 0===i?void 0:i.id)===t});n&&n.destroy()}hide(t){var n;const s=this.modal.openModals.find(i=>{var d;return(null===(d=i.componentInstance)||void 0===d?void 0:d.id)===t});if(s){const i=null===(n=s.getElement().parentElement)||void 0===n?void 0:n.parentElement;null==i||i.classList.add("pointer-events-none")}}show(t){t.stopPropagation(),this._hideAllStatus=!1,this.modal.openModals.map(n=>{this.showModal(n)})}closeAll(){this.modal.closeAll()}hideAll(){this._hideAllStatus||(this._hideAllStatus=!0,this.modal.openModals.map(t=>{this.hideModal(t)}),this.currentIndex=1001)}showModal(t){var n;const s=t.getConfig();let i=null===(n=s.nzWrapClassName)||void 0===n?void 0:n.split(" ");(null==i?void 0:i.find(d=>"d-none"===d))&&(i=null==i?void 0:i.filter(d=>"d-none"!==d)),t.updateConfig(Object.assign(Object.assign({},s),{nzWrapClassName:null==i?void 0:i.join(" ")}))}hideModal(t){var n;const s=t.getConfig();let i=null===(n=s.nzWrapClassName)||void 0===n?void 0:n.split(" ");(null==i?void 0:i.find(d=>"d-none"===d))||null==i||i.push("d-none"),t.updateConfig(Object.assign(Object.assign({},s),{nzZIndex:1e3,nzWrapClassName:null==i?void 0:i.join(" ")}))}randomString(t){t=t||32;var n="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",s=n.length,i="";for(let d=0;d<t;d++)i+=n.charAt(Math.floor(Math.random()*s));return i}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(z.Sf),e.LFG(e.FYo),e.LFG(h.K0))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var K=r(1485),q=r(3652),ee=r(7653),te=r(13),oe=r(2198);function ne(o,l){if(1&o&&(e.ynx(0),e.TgZ(1,"form",7),e._UZ(2,"formly-form",8),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("form",t.form)("fields",t.field)("model",t.model)}}const ie=function(){return{language:"json"}};let re=(()=>{class o{constructor(t){this.cd=t,this.id="",this.onMin=new e.vpe,this.onMax=new e.vpe,this._fields=[],this.code="",this.form=new a.cw({}),this.field=[],this.searchChange$=new x.X(""),this.searchChange$.asObservable().pipe((0,te.b)(300)).pipe((0,oe.h)(n=>!!n)).subscribe(n=>{console.log("search:"+n);try{this.field=(0,ee.o9)(n)}catch(s){console.log(s)}finally{this.cd.detectChanges()}})}min(t){this.click&&this.click("min",t)}max(t){this.click&&this.click("max",t)}close(t){this.click&&this.click("close",t)}set fields(t){this._fields=t,this.setCode(t)}get fields(){return this._fields}setCode(t){this.code=(0,A.format)(JSON.stringify(t),{parser:"json",plugins:[O]}),this.field=JSON.parse(JSON.stringify(t))}editorInitialized(t){t.onDidChangeModelContent(()=>{let n=t.getValue();console.log("editor:"+n),this.searchChange$.next(n)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["custom-modal-content"]],inputs:{model:"model",nzTitle:"nzTitle",modal:"modal",id:"id",click:"click",fields:"fields"},outputs:{onMin:"onMin",onMax:"onMax"},decls:10,vars:8,consts:[[1,"row",2,"height","100%"],[1,"col-6",2,"height","100%","position","relative"],[2,"height","100%","position","relative"],["nzTitle","Fields",2,"height","100vh","position","relative"],[1,"editor",2,"height","100vh",3,"nzEditorMode","ngModel","nzEditorOption","nzEditorInitialized"],["nzTitle","Model"],[4,"ngIf"],[1,"col-6","w-50",3,"formGroup"],[1,"row",3,"form","fields","model"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"nz-tabset",2),e.TgZ(3,"nz-tab",3),e.TgZ(4,"nz-code-editor",4),e.NdJ("nzEditorInitialized",function(i){return n.editorInitialized(i)}),e.qZA(),e.qZA(),e.TgZ(5,"nz-tab",5),e.TgZ(6,"pre"),e._uU(7),e.ALo(8,"json"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(9,ne,3,4,"ng-container",6),e.qZA()),2&t&&(e.xp6(4),e.Q6J("nzEditorMode","normal")("ngModel",n.code)("nzEditorOption",e.DdM(7,ie)),e.xp6(3),e.hij(" ",e.lcZ(8,5,n.model),""),e.xp6(2),e.Q6J("ngIf",n.field&&n.field.length))},directives:[M.xH,M.xw,S.XZ,a.JJ,a.On,h.O5,a._Y,a.JL,a.sg,p.T7],pipes:[h.Ts],styles:[".modal-wrap[_ngcontent-%COMP%]{margin:-24px;cursor:pointer}"]}),o})();var se=r(9860);let le=(()=>{class o{constructor(t,n,s,i){this.modal=t,this.rendererFactory=n,this.drawerService=s,this.document=i,this.renderer=this.rendererFactory.createRenderer(null,null)}create(t,n=null){n&&n.stopPropagation();const s=(0,se.O1)(32);return console.log("create"),this.drawerService.create(Object.assign({nzContent:re,nzViewContainerRef:this.viewContainerRef,nzContentParams:{id:s,fields:t.fields,model:t.model,modal:this.modal,click:(d,u)=>{console.log(d,u)}},nzClosable:!1},t))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(z.Sf),e.LFG(e.FYo),e.LFG(E.ai),e.LFG(h.K0))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var de=r(2643),ae=r(1941);function ce(o,l){if(1&o&&(e.TgZ(0,"nz-page-header",5),e.TgZ(1,"nz-page-header-title"),e._uU(2),e.qZA(),e.TgZ(3,"nz-page-header-content"),e._UZ(4,"div",6),e.ALo(5,"marked"),e.qZA(),e.qZA()),2&o){const t=e.oxw(3);e.xp6(2),e.Oqu(null==t.info?null:t.info.title),e.xp6(2),e.Q6J("innerHtml",e.lcZ(5,2,null==t.info?null:t.info.content),e.oJD)}}function he(o,l){if(1&o){const t=e.EpF();e.ynx(0),e._UZ(1,"nz-alert",1),e.YNc(2,ce,6,4,"nz-page-header",2),e.TgZ(3,"form",3),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw(2).submit()}),e.TgZ(4,"formly-form",4),e.NdJ("modelChange",function(s){return e.CHM(t),e.oxw(2).model=s}),e.qZA(),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.info),e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("form",t.form)("fields",t.fields)("model",t.model)("options",t.options)}}function me(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"nz-result",7),e.TgZ(2,"div",8),e.TgZ(3,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).backHome()}),e._uU(4,"Back Home"),e.qZA(),e.qZA(),e.qZA(),e.BQk()}}function ue(o,l){1&o&&(e.ynx(0),e.TgZ(1,"nz-result",10),e.TgZ(2,"div",8),e.TgZ(3,"button",11),e._uU(4,"Back Home"),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&o&&(e.xp6(3),e.Q6J("routerLink","dashboard/analysis"))}function fe(o,l){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"nz-result",12),e.TgZ(2,"div",8),e.TgZ(3,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).backHome()}),e._uU(4,"Back Home"),e.qZA(),e.qZA(),e.qZA(),e.BQk()}}function ge(o,l){if(1&o&&(e.ynx(0),e.YNc(1,he,5,6,"ng-container",0),e.YNc(2,me,5,0,"ng-container",0),e.YNc(3,ue,5,1,"ng-container",0),e.YNc(4,fe,5,0,"ng-container",0),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",200==t.status),e.xp6(1),e.Q6J("ngIf",403==t.status),e.xp6(1),e.Q6J("ngIf",404==t.status),e.xp6(1),e.Q6J("ngIf",500==t.status)}}const ve=[{canDeactivate:[],path:"",pathMatch:"full",component:(()=>{class o{constructor(t,n,s,i,d,u,Fe,xe,ye,Ze,Te){var y;this.cd=t,this.fieldService=n,this.route=s,this.router=i,this.ngZone=d,this.nzConfigService=u,this.routeCache=Fe,this.modalService=xe,this.previewService=ye,this.codeEditorService=Ze,this.http=Te,this.model={},this.form=new a.cw({}),this.fields=[],this.options={formState:{caches:"1"}},this.loading=!0,this.status=200,this.codeType="json",this.isVisible=!1,this.code="",this.cacheFields="",this.destroy$=new b.xQ,this.rooterChange=this.router.events.subscribe(c=>{if(c instanceof m.m2){console.log(c),this.loading=!0,this.cd.markForCheck();const g=this.routeCache.get(this.router.url);g?(this.render(g),this.routeCache.recoveryHistoryPosition(this.router.url)):(this.loading=!0,this.fieldService.getField(this.router.url).subscribe(f=>{this.routeCache.set(this.router.url,f),this.render(this.routeCache.get(this.router.url))},f=>{this.loading=!1,this.status=null==f?void 0:f.status,this.clearData(),this.cd.markForCheck()}))}}),this.route.paramMap.subscribe(c=>{console.log(c)});const Ee=(null===(y=this.nzConfigService.getConfigForComponent("codeEditor"))||void 0===y?void 0:y.defaultEditorOption)||{};this.nzConfigService.set("codeEditor",{defaultEditorOption:Object.assign(Object.assign({},Ee),{theme:"vs-dark",minimap:{enabled:!1},language:"javascript",autoIndent:!0,formatOnPaste:!0,formatOnType:!0,wordwrap:"on"})}),(0,F.Z)("Esc",(c,g)=>{this.isVisible=!1,this.cd.markForCheck()}),(0,F.Z)(".",(c,g)=>{this.codeEditorService.create({nzHeight:"100vh",nzPlacement:"bottom",nzWrapClassName:"dragModal",nzOnOk:()=>new Promise(we=>setTimeout(we,1e3)),fields:this.cacheFields,model:this.model,nzMask:!1})}),(0,F.Z)("m",(c,g)=>{})}render(t){this.loading=!0,this.info=null==t?void 0:t.info;try{this.form.reset({},{onlySelf:!1,emitEvent:!1}),this.form=new a.cw({}),this.cacheFields=null==t?void 0:t.fields,this.fields="string"==typeof(null==t?void 0:t.fields)?(0,Q.o9)(null==t?void 0:t.fields):t.fields,this.model=null==t?void 0:t.data,this.options.formState.cacheFields=t.fields,this.code=(0,A.format)(JSON.stringify(t.fields),{parser:"json",plugins:[O]})}catch(n){this.fields=[],this.model={},this.info=null,console.log(n)}finally{this.status=200,this.loading=!1,this.cd.detectChanges()}}clearData(){this.fields=[],this.model={},this.info=null,this.form.reset(),this.cd.detectChanges(),this.cd.markForCheck()}setup(){this.ngZone.runOutsideAngular(()=>(0,Y.ov)().pipe((0,B.R)(this.destroy$)).subscribe(()=>{}))}submit(){}preview(t){this.previewService.open(t)}backHome(){this.http.get("web/file/1111").subscribe(t=>{console.log("111")})}ngOnDestroy(){this.rooterChange&&this.rooterChange.unsubscribe(),this.destroy$.next(),this.destroy$.complete()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(H),e.Y36(m.gz),e.Y36(m.F0),e.Y36(e.R0b),e.Y36(R.jY),e.Y36(G.Q),e.Y36($.Z),e.Y36(V),e.Y36(le),e.Y36(I.eN))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-form"]],hostAttrs:[1,"p-3","d-block"],decls:1,vars:1,consts:[[4,"ngIf"],["nzType","info","nzCloseable","","nzDescription","\u952e\u76d8\u70b9\u51fb . , \u53ef\u4ee5\u7f16\u8f91\u5f53\u524d\u9875\u9762\u914d\u7f6e, \u70b9\u51fb M \u53ef\u4ee5\u628a\u5f53\u524d\u9875\u9762\u8f6c\u5f39\u7a97",1,"mb-3"],["class","bg-white mb-3",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"row",3,"form","fields","model","options","modelChange"],[1,"bg-white","mb-3"],[3,"innerHtml"],["nzStatus","403","nzTitle","403","nzSubTitle","Sorry, you are not authorized to access this page."],["nz-result-extra",""],["nz-button","","nzType","primary",3,"click"],["nzStatus","404","nzTitle","404","nzSubTitle","Sorry, the page you visited does not exist."],["nz-button","","nzType","primary",3,"routerLink"],["nzStatus","500","nzTitle","500","nzSubTitle","Sorry, there is an error on server."]],template:function(t,n){1&t&&e.YNc(0,ge,5,4,"ng-container",0),2&t&&e.Q6J("ngIf",!n.loading&&n.form)},directives:[h.O5,w.r,v.$O,v.u9,v.u5,a._Y,a.JL,a.sg,p.T7,C.ml,C.ey,T.ix,de.dQ,N.w,m.rH],pipes:[ae.r],styles:[".editor[_ngcontent-%COMP%]{height:200px}.mGraph-wrapper[_ngcontent-%COMP%]{width:100%;height:500px;background:#fff;position:relative;display:flex;align-items:center;justify-content:center}.mGraph-wrapper[_ngcontent-%COMP%]   .mGraph[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}"],changeDetection:0}),o})()}];let pe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[m.Bz.forChild(ve)],m.Bz]}),o})();var Ce=r(9731),ze=r(5503);let Me=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[h.ez,pe,a.u5,a.UX,ze.D,U.v,k.j,z.Qp,C.XD,E.BL,S.qw,v.KJ,T.sL,J.j,j.eL,w.L,M.we,p.X0,K.D,q.c,Ce.kx]]}),o})()}}]);